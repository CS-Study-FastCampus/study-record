## 컴퓨터의 요소

**1) 메모리**
실행되는 프로그램의 명령어와 데이터를 저장하는 기억장치

**2) CPU**
메모리에 저장된 명령어를 읽어들이고 해석하고 실행하는 장치

**3) 입출력장치**
컴퓨터 외부에 연결되어 컴퓨터 내부와 정보를 교환할 수 있는 장치

**4) 디바이스 컨트롤러**
입출력장치의 작은 CPU

**5) DMA 컨트롤러**
입출력장치가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치

**6) 타이머**
특정 프로그램이 CPU를 독점하는 것을 막기 위한 장치


<br>

### 메모리

메모리는 컴퓨터에서 실행되는 프로그램의 명령어와 데이터를 저장하는 기억장치이며 주기억장치와 보조기억장치로 분류된다.

- 주기억장치는 대표적으로 RAM, ROM등이 있으며 보통 RAM을 일컬어 메모리라고 한다.
- 보조기억장치는 주기억장치에 비해 읽고 쓰는 속도가 느리지만 컴퓨터 전원을 끄면 저장내용이 모두 지워지는 RAM과 달리 영구적으로 데이터를 저장할 수 있다는 장점이 있다.

<p align="center"><img src = https://velog.velcdn.com/images/bornin23/post/c15fd112-4311-444c-874a-15982544e8a0/image.JPG width="25%"></p>

사용자가 컴퓨터에서 어떤 프로그램을 실행시키면 해당 프로그램은 메모리에 올라가고, 메모리는 그 정보를 CPU와 주고받으며 정보를 읽고 쓰는 작업을 한다.
그리고 메모리는 각 위치의 주소들로 이루어져있어, 메모리에 저장된 값의 위치는 해당 주소를 통해 알 수 있다.

<br>

### CPU

#### CPU의 구성

CPU(Central Processint Unit)는 메모리에 올려진 프로그램을 처리하는 일종의 일꾼같은 개념이다. 산술논리연산장치, 제어장치, 레지스터로 구성되어있다.

**1) 산술논리연산장치**
산술논리연산장치(ALU, Arithmetic Logic Unit)는 산술연산, 논리연산 등을 계산하는 회로

**2) 제어장치**
제어장치(CU, Control Unit)은 제어신호를 내보내고 명령어를 해석하는 장치

**3) 레지스터**
CPU 안에 있는 임시기억장치
명령어 레지스터, 플래그 레지스터 등 다양한 종류의 레지스터로 구성되어있으며, 각 레지스터별로 저장할 수 있는 데이터가 다르다.

#### CPU의 연산처리
CPU는 ALU, 제어장치, 레지스터의 상호작용을 통해 프로그램의 연산을 수행한다.
<p align="center"><img src = https://velog.velcdn.com/images/bornin23/post/9f8711f1-0bd4-4dd0-b3f2-c8592f6a53ac/image.JPG width="100%"></p>

먼저, 메모리에서 실행중인 프로그램의 데이터와 명령어들은 CPU의 임시기억장치인 레지스터에 저장이 된다. 명령어가 레지스터를 거쳐 제어장치에 전달되면, 제어장치는 해당 명령어를 해석하고 ALU에 전달할 수 있는 <span style="color:slateblue">제어신호</span>로 변환해 내보낸다. 명령어와 피연산자 등의 내용을 토대로 ALU에서 필요한 연산을 처리하고 그 결과값을 레지스터에 먼저 임시로 저장한 뒤, 메모리로 다시 전달된다.

위 과정에서 레지스터의 종류 중 명령어 레지스터는 명령어만을, 플래그 레지스터는 <span style="color:slateblue">플래그</span>만을 제어장치에 전달한다. 그 외에도 다양한 레지스터의 종류들이 있고, 각각의 레지스터 별로 저장할 수 있는 데이터와 명령어들이 나눠져 있기 때문에 실제 CPU의 연산처리 과정은 위 그림보다 훨씬 복잡하게 이루어진다.

<span style="color:slateblue">**플래그</span>
연산결과에 대한 부가정보 (ex 양수, 음수에 대한 정보)

<span style="color:slateblue">**제어신호</span>
컴퓨터의 부품들을 관리하고 작동시키기 위한 전기신호

<br>

### ❗인터럽트
인터럽트는 어떤 신호가 들어왔을 때 CPU를 잠시 정지시키는 것을 의미하며 CPU가 먼저 처리해야 할 다른 작업이 생겼을 때 발생한다.

**1) 하드웨어 인터럽트**
하드웨어 인터럽트는 키보드를 연결하거나 마우스를 연결하는 일 등 입출력장치에 의해 발생하는 인터럽트를 말한다.
**2) 소프트웨어 인터럽트**
소프트웨어 인터럽트는 트랩(trap)이라고도 하며 프로세스 오류 등으로 프로세스가 시스템콜을 호출할 때 발생한다.

#### 인터럽트 처리 과정
1. 프로그램 진행 도중 인터럽트 소스가 인터럽트 요청 신호를 보낸다.
2. 해당 인터럽트의 <span style="color:slateblue">인터럽트 벡터</span>를 확인한다.
3. <span style="color:slateblue">인터럽트 서비스 루틴</span>을 실행한다.

<span style="color:slateblue">**인터럽트 핸들러(= 인터럽트 서비스 루틴)</span>
인터럽트가 발생했을 때 이를 핸들링하기 위한 함수로, 인터럽트 서비스 루틴이라고도 한다.
실제 인터럽트를 처리하기 위한 루틴이며, 각종 인터럽트 별로 처리해야 할 내용이 이미 프로그램되어있다.

<span style="color:slateblue">**인터럽트 벡터</span>
인터럽트가 발생했을 때, 그 인터럽트를 처리할 수 있는 서비스 루틴들의 주소를 갖고 있는 공간

<p align="center"><img src = https://velog.velcdn.com/images/bornin23/post/aca1ba79-bd4c-4aa4-9ca8-8625a293658b/image.JPG width="70%"></p>

인터럽트 발생 시 레지스터에서 저장하고 있던 CPU가 처리중인 프로세스의 데이터는 메모리의 스택 영역으로 이동한다. 그리고 CPU에서 해당 인터럽트를 처리한 후에 스택 영역에 저장되어 있는 데이터를 레지스터로 다시 가져와서 프로세스를 이어나간다.

<br>

### 디바이스 컨트롤러
입출력장치의 작은 CPU를 의미하며 개별적으로 데이터를 임시저장할 수 있는 "로컬버퍼"라는 메모리 공간을 갖고 있다.

CPU가 입출력장치에게 명령을 할 때, 입출력장치에게 직접 접근하지 않고 디바이스 컨트롤러에게 명령을 내리면 디바이스 컨트롤러가 해당 명령을 수행한다.

<br>

### DMA 컨트롤러
DMA(Direct Memory Access, 직접접근방식)는 DMA 컨트롤러를 통해 특정 하드웨어가 CPU를 거치지 않고 메모리에 접근할 수 있도록 하는 시스템 방식이다.

입출력장치의 로컬버퍼의 데이터가 일정 단위까지 찼을때까지 기다렸다가 DMA 컨트롤러가 해당 데이터를 메모리에 직접 카피한 후 CPU한테 인터럽트를 걸게 된다.

DMA를 통해 모든 입출력장치의 인터럽트를 CPU가 처리한다면 CPU의 작업 속도가 느려질 수밖에 없는 문제를 해결할 수 있다.

<br>

### 타이머
타이머는 일정 시간제한을 두고, 특정 프로그램에 시간제한을 다는 역할을 한다. 예를 들어, 무한루프를 도는 시스템이 발생했을 때 일정 시간이 지나면 타이머가 CPU에 인터럽트를 걸고 CPU가 다른 프로세스를 처리하도록 한다.

시간이 오래 걸리는 프로그램이 작동할 때 제한을 걸기 위해 존재하며, 현재 시간을 구할 때 사용되기도 한다. 

