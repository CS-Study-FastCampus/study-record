# 5.3.3 힙

### (1) 힙(Heap)이란 무엇인가?

- 완전 이진 트리 기반의 자료구조 입니다.
    - `(복습)` 완전 이진 트리는 어떤 이진 트리인가요?
        - 마지막 레벨을 제외한 모든 노드가 왼쪽부터 채워져 있는 트리를 말합니다.
- BST(이진 탐색 트리)과의 차이점은 다음과 같습니다.
    - 힙은 중복된 값을 허용합니다.
    - 힙에서 노드에 제약이 존재하지 않습니다.
        - BST에서는 자신보다 작은 값은 왼쪽 노드로 큰 값은 오른쪽 노드로 이동하는 제약이 있었습니다.
- 최대, 최소를 기준으로 데이터를 찾는 연산에서 탐색 속도는 O(1)의 시간 복잡도를 갖습니다.
- 데이터의 삽입, 삭제는 O(logn)의 시간 복잡도를 갖습니다.
- 힙은 어떠한 값이 들어와도 특정 힙(최대 힙, 최소 힙)의 규칙을 지키도록 만들어져 있습니다.
    - 이렇게 힙이 특정 규칙을 지키도록 재구조화하는 연산을 Heapify 연산이라고 합니다. 뒤에서 조금 자세히 적어보겠습니다.
- 힙을 1차원 배열에 저장할 때는 0번 index는 비워놓고 1번 부터 채워넣습니다.
    - index는 아래와 같은 조건을 만족합니다.
        - (1) `childIndex / 2 = parentIndex`
        - (2) `parentIndex * 2 = leftChildIndex`
        - (3) `(parentIndex * 2) + 1 = rightChildIndex`
            
            ![image](https://user-images.githubusercontent.com/70641477/232718650-e4c1901d-4890-49ca-ad74-248948c662bd.png)
            

<br>

### (2) 힙의 종류

1. 최대 힙 (Max Heap)
    - 각 노드의 값이 자신의 자식 노드의 값 보다 크거나 같아야 합니다.
    - 루트 노드는 항상 최댓값을 갖는 노드가 존재합니다.
2. 최소 힙 (Min Heap)
    - 각 노드의 값이 자신의 자식 노드의 값 보다 작거나 같아야 합니다.
    - 루트 노드는 항상 최솟값을 갖는 노드가 존재합니다.

![image](https://user-images.githubusercontent.com/70641477/232718706-f8fb1fe2-5723-4692-9fa0-f95421e5b0fa.png)

<br>

### (3) 힙을 재구조화하는 연산 Heapify

- 데이터가 추가되고, 삭제될 때 힙의 특징을 계속 유지하기 위해서 사용하는 연산을 의미합니다.
- **힙에 데이터가 추가될 때**
    1. 완전 이진 트리의 특징을 유지하기 위해서 가장 마지막 Leaf 노드에 값을 추가합니다.
    2. 힙의 조건을 만족하는지 확인합니다.
    3. 힙의 조건이 만족한다면 연산을 종료합니다.
    4. 힙의 조건이 만족하지 않다면, 삽입된 노드와 부모 노드의 자리를 바꿉니다.
    5. 다시 힙의 조건이 만족하는지 검사하고, 만족하지 않다면 만족할 때까지 2번과 4번 과정을 반복합니다.
- **힙에서 데이터를 삭제할 때**
    1. 힙의 마지막 Leaf 노드와 루트 노드의 위치를 바꿉니다. 그리고 나서 루트 노드의 데이터를 삭제합니다.
    2. 힙의 조건을 만족하는지 확인합니다.
    3. 힙의 조건이 만족한다면 연산을 종료합니다.
    4. 힙의 조건이 만족하지 않다면, 루트 노드(Leaf 노드에 있던 값)와 자식 노드의 값을 비교하여 자리를 바꿉니다.
    5. 다시 힙의 조건이 만족하는지 검사하고, 만족하지 않다면 만족할 때까지 2번과 4번 과정을 반복합니다.
- 이런 연산 과정을 거치기 때문에 자료의 데이터 개수가 N개라면 이진 트리의 특성상 한번 비교할 때마다 N/2번의 비교로 나누어집니다. 그래서 힙의 데이터 삽입, 삭제의 시간 복잡도는 O(logn)이 됩니다.

<br>

### (4) 최대힙의 삽입 예시

- 최대 힙에서 27이라는 새로운 데이터를 추가하는 예시를 아래 그림으로 표현해봤습니다.

![image](https://user-images.githubusercontent.com/70641477/232718765-b35a705c-048f-4b48-8820-cae02bc2d673.png)

<br>

### (5) 최대힙 데이터 삭제 예시

- 위에 데이터 삽입 예시에 이어서 최상위 데이터(27, 루트노드)를 pop()하는 과정에 대한 예시를 아래 그림으로 그려봤습니다.

![image](https://user-images.githubusercontent.com/70641477/232718810-c21a15cc-a757-46ce-9785-7b2e307267b8.png)
